export function buildPrompt({
    businessNiche,
    product,
    targetAudience,
    textType,
    tone,
    length,
}) {
    const cleanedNiche = businessNiche.trim();
    const cleanedProduct = product.trim();
    const cleanedAudience = targetAudience.trim();

    const toneHintMap = {
        "Экспертный":
            "пиши спокойным, уверенным тоном, опираясь на опыт и " +
            "объясняя логику подхода без запугивания и громких " +
            "обещаний.",
        "Теплый":
            "пиши мягко и поддерживающе, с акцентом на заботе, " +
            "принятии и бережном отношении к телу.",
        "Мягко-продающий":
            "пиши мягко-продающим тоном: приглашение к следующему " +
            "шагу без давления, с уважением к выбору человека.",
    };

    const lengthHintMap = {
        Короткий:
            "объём сделай компактным, ближе к анонсу без " +
            "развёрнутых объяснений.",
        Средний:
            "объём сделай средним: достаточно деталей, но без " +
            "лишней воды.",
        Длинный:
            "объём сделай подробным, с несколькими логичными " +
            "подзаголовками и примерами.",
    };

    const hookMap = {
        "Telegram-пост":
            "Сделай первые 1–2 строки в виде цепляющего хука " +
            "для ленты Telegram, чтобы экспертная тема сразу " +
            "заинтересовала читателя.",
        "VK-пост":
            "Сделай первые 1–2 строки в формате хука для VK: " +
            "понятный, живой заход, который выделяется в общей " +
            "лента новостей.",
        "Описание услуги":
            "Начало основного текста сделай как аккуратное " +
            "описание услуги: что это, для кого и при каких " +
            "запросах может быть полезно.",
        "Продающее сообщение":
            "Первые строки сделай как личное обращение в " +
            "личные сообщения: бережное, без давления, с фокусом " +
            "на запрос человека.",
        "Прогревающий пост":
            "Начало сделай как историю или наблюдение, которое " +
            "помогает мягко подвести к теме услуги без прямых " +
            "призывов.",
    };

    const toneHint = toneHintMap[tone] || "";
    const lengthHint = lengthHintMap[length] || "";
    const hookHint = hookMap[textType] || "";

    return [
        "Ты профессиональный копирайтер, который помогает экспертам " +
            "в нише здоровья и работы с ресурсом тела (например, " +
            "ТКМ, телесные практики, осознанный уход).",
        "",
        `Тебе нужно написать ${textType} для ниши «${cleanedNiche}» ` +
            `и продукта «${cleanedProduct}» для аудитории ` +
            `«${cleanedAudience}».`,
        "",
        "Учитывай следующие требования к стилю и объёму:",
        `- тон: ${tone} (${toneHint});`,
        `- длина: ${length.toLowerCase()} (${lengthHint});`,
        "- без агрессивных обещаний, чудо-результатов и запугивания;",
        "- без категоричных диагнозов и медицинских гарантий;",
        "- поддерживающий, бережный подход к читателю.",
        "",
        "Хук/начало текста:",
        `- ${hookHint}`,
        "",
        "Строго следуй структуре результата и не добавляй лишних блоков:",
        "",
        "1) Секция «Заголовки (3 варианта)»:",
        "   - выведи ровно 3 разных заголовка, по одному в строке;",
        "   - каждый заголовок должен быть цепляющим, но аккуратным,",
        "     без обещаний лечения и чудес.",
        "",
        "2) Секция «Основной текст (1 версия)»:",
        "   - сделай текст цельным, разделённым на абзацы;",
        "   - используй подзаголовки, если это уместно для типа " +
            "текста;",
        "   - объясни, с какими состояниями и вопросами приходит " +
            "аудитория;",
        "   - покажи, как продукт помогает поддерживать ресурс тела, " +
            "но не является лечением и не даёт гарантий результата;",
        "   - избегай сложных терминов без пояснений.",
        "",
        "3) Секция «Мягкие CTA (3 варианта)»:",
        "   - выведи ровно 3 варианта мягких призывов к действию;",
        "   - приглашай на консультацию/разбор/диалог без давления,",
        "     оставляя человеку свободу выбора.",
        "",
        "4) Секция «Важно»:",
        "   - сделай 1–2 аккуратных дисклеймера про то, что текст не ",
        "     заменяет консультацию врача, диагностику и лечение;",
        "   - не запугивай, просто мягко напомни о важности обращения",
        "     к специалистам при серьёзных симптомах.",
        "",
        "Всё пиши на живом, понятном русском языке, как для умного, " +
            "но уставшего человека, который ищет бережную опору, а " +
            "не очередное чудо-средство.",
    ].join(" ");
}
