## Описание проекта

Этот репозиторий — учебно-практический MVP-проект
«Нейро-копирайтер для экспертного бизнеса» для демонстрации рабочего
workflow:
MVP в Cursor → доработки через GitHub (ветка → PR → merge).

Приложение помогает эксперту (например, Ксении в нише ТКМ/здоровье)
быстро получать структурированные черновики текстов:
посты, описания услуг, мягко‑продающие сообщения.

Пользователь заполняет параметры (ниша, продукт, ЦА, тип текста, тон,
длина), frontend собирает промпт, отправляет его на backend `/generate`,
получает результат и показывает его в UI. Результат можно
отредактировать и скопировать.

Backend работает в mock‑режиме и не требует реального AI‑ключа,
поэтому весь проект запускается «из коробки» через Docker Compose.

## Стек

- **Frontend**: React 18 + Vite
- **Backend**: FastAPI + Pydantic
- **Инфраструктура**: Docker, Docker Compose

## Запуск через Docker (основной способ)

Требования:

- установлен Docker
- установлен Docker Compose (или встроенная команда `docker compose`)

### 1. Подготовка `.env`

В корне проекта уже должен существовать файл `.env`. Он **не**
коммитится в репозиторий.

Для работы MVP обязательных значений нет, но для удобства можно
добавить, например:

```bash
VITE_API_URL=http://backend:8000
```

При необходимости для будущей интеграции с AI можно использовать
переменные, указанные в `backend/.env.example`.

### 2. Сборка и запуск

В корне репозитория выполните:

```bash
docker compose up --build
```

Docker поднимет два сервиса:

- **backend**: FastAPI на порту `8000`
- **frontend**: Vite dev server на порту `5173`

### 3. URLы

- Frontend: `http://localhost:5173`
- Backend (API): `http://localhost:8000`
  - `GET /health` — простой health‑check (`{"status": "ok"}`)
  - `POST /generate` — генерация mock‑текста

### 4. Остановка контейнеров

В том же каталоге:

```bash
docker compose down
```

## Локальный запуск без Docker (опционально)

### Backend

1. Установите зависимости:

   ```bash
   cd backend
   python -m venv .venv
   source .venv/bin/activate  # для Linux/macOS
   pip install -r requirements.txt
   ```

2. Запустите FastAPI через uvicorn:

   ```bash
   uvicorn main:app --host 0.0.0.0 --port 8000
   ```

Backend будет доступен по адресу `http://localhost:8000`.

### Frontend

1. Установите зависимости:

   ```bash
   cd frontend
   npm install
   ```

2. Запустите Vite dev server:

   ```bash
   npm run dev -- --host 0.0.0.0 --port 5173
   ```

3. Откройте в браузере:

   `http://localhost:5173`

При необходимости можно передать `VITE_API_URL` в `.env` фронтенда
или через терминал, чтобы указать адрес backend.

## Как использовать приложение

1. Откройте frontend в браузере (`http://localhost:5173`).
2. Заполните поля формы:
   - ниша / тематика бизнеса;
   - продукт / услуга;
   - целевая аудитория;
   - тип текста;
   - тон;
   - длина.
3. При желании включите флажок **«Показать промпт (debug mode)»**, чтобы
   увидеть итоговый промпт и скопировать его.
4. Нажмите кнопку **«Сгенерировать»** и дождитесь, пока статус
   сменится на сгенерированный текст.
5. При необходимости отредактируйте текст в поле результата.
6. Нажмите **«Копировать текст»**, чтобы отправить черновик в буфер
   обмена и вставить его в нужную платформу.

## Примеры запросов для Ксении / ТКМ

Вот несколько идей, которые можно сразу пробовать в форме:

- утренние отёки и мягкая поддержка лимфы;
- пробуждения в 3–4 утра и ресурс печени;
- хруст коленей после 40 и работа с суставами;
- anti‑age через ресурс тела, а не через насилие над собой.

## GitHub workflow: ветка → PR → merge

Этот репозиторий задуман как демонстрация базового GitHub‑workflow
для улучшения MVP.

Рекомендуемый сценарий:

1. Обновите локальную ветку `main`:

   ```bash
   git checkout main
   git pull origin main
   ```

2. Создайте feature‑ветку:

   ```bash
   git checkout -b feature/your-improvement-name
   ```

3. Внесите изменения в код (frontend/backend/infra).
4. Подготовьте коммит:

   ```bash
   git add .
   git commit -m "Краткое описание изменения"
   ```

5. Отправьте ветку в удалённый репозиторий:

   ```bash
   git push -u origin feature/your-improvement-name
   ```

6. Откройте Pull Request в GitHub:
   - base: `main`
   - compare: `feature/your-improvement-name`
   - в описании укажите суть изменений и как их протестировать.

7. После ревью выполните merge PR в `main` через GitHub UI.

Ветки можно называть, например:

- `feature/prompt-quality-and-debug`
- `feature/api-integration`
- `feature/form-validation-improvements`

## Переменные окружения

- Реальный `.env` лежит в **корне** репозитория и **не**
  коммитится в Git.
- Файл `backend/.env.example` содержит только примеры имен
  переменных:
  - `OPENAI_API_KEY=`
  - `OPENAI_BASE_URL=`
  - `OPENAI_MODEL=gpt-4.1-mini`

В текущем MVP backend использует **mock‑генерацию** текста и не требует
реальных ключей. Наличие значений `OPENAI_*` можно использовать
в следующих feature‑ветках для подключения реального AI‑API.

## Что реализовано в MVP

- Простая форма на React + Vite с базовой валидацией и debug‑режимом.
- Отдельный модуль `buildPrompt` для конструирования промпта
  в понятном виде.
- Backend на FastAPI с endpoint `/generate` и предсказуемым
  mock‑ответом.
- Структурированный результат: заголовки, основной текст, мягкие CTA,
  блок «Важно».
- Запуск через Docker Compose с разделением на frontend и backend.

## Идеи для следующих feature‑веток

- **Усиление промпта и debug‑mode**
  - более детальная настройка стиля и длины;
  - вывод дополнительной служебной информации в debug‑режиме;
  - сохранение последних настроек формы в localStorage.

- **Реальная AI‑интеграция**
  - использование переменных `OPENAI_*` из `.env`;
  - переключатель mock/real режима на backend;
  - аккуратные логи без утечек промптов и секретов.
